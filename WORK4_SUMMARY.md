# WORK4 - –°–∫–æ–ª—å–∑—è—â–µ–µ –æ–∫–Ω–æ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ –¥–ª—è —Ç–∞–π–º—Ñ—Ä–µ–π–º–æ–≤

## üìÖ –î–∞—Ç–∞: 2025-10-24

## üéØ –¶–µ–ª—å –∏–∑–º–µ–Ω–µ–Ω–∏–π
–†–µ–∞–ª–∏–∑–∞—Ü–∏—è "—Å–∫–æ–ª—å–∑—è—â–µ–≥–æ –æ–∫–Ω–∞ –¥–∏–∞–ø–∞–∑–æ–Ω–∞" –≤ —Å—Ç–∏–ª–µ PocketOption –¥–ª—è –≤—Å–µ—Ö —Ç–∞–π–º—Ñ—Ä–µ–π–º–æ–≤ M1+.
–°–≤–µ—á–∏ —Ç–µ–ø–µ—Ä—å –æ—Å—Ç–∞—é—Ç—Å—è –æ–¥–∏–Ω–∞–∫–æ–≤–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞, –¥–∏–∞–ø–∞–∑–æ–Ω high-low "—Å–∫–æ–ª—å–∑–∏—Ç" –≤–º–µ—Å—Ç–µ —Å —Ü–µ–Ω–æ–π.

## üì¶ –ë—ç–∫–∞–ø —Ñ–∞–π–ª—ã (–¥–ª—è –æ—Ç–∫–∞—Ç–∞):
- `frontend/chart_work4.js` - –±—ç–∫–∞–ø chart.js
- `frontend/app_work4.js` - –±—ç–∫–∞–ø app.js
- `frontend/chartTimeframe_work4.js` - –±—ç–∫–∞–ø chartTimeframe.js
- `backend/server_work4.js` - –±—ç–∫–∞–ø server.js
- `backend/chartGenerator_work4.js` - –±—ç–∫–∞–ø chartGenerator.js

## üîß –í–Ω–µ—Å–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### `frontend/chartTimeframe.js` - –ì–õ–ê–í–ù–´–ô –§–ê–ô–õ –ò–ó–ú–ï–ù–ï–ù–ò–ô

#### 1. –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–∞–π–º—Ñ—Ä–µ–π–º–æ–≤
```javascript
timeframeConfig = {
    'M1': { accumulationPhase: 0.17, fixedRangePercent: 0.03 },   // 10 —Å–µ–∫ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ, ¬±0.03%
    'M2': { accumulationPhase: 0.17, fixedRangePercent: 0.04 },   // 20 —Å–µ–∫ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ, ¬±0.04%
    'M5': { accumulationPhase: 0.15, fixedRangePercent: 0.05 },   // 45 —Å–µ–∫ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ, ¬±0.05%
    'M10': { accumulationPhase: 0.20, fixedRangePercent: 0.06 },  // 2 –º–∏–Ω –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ, ¬±0.06%
    'M15': { accumulationPhase: 0.20, fixedRangePercent: 0.08 },  // 3 –º–∏–Ω –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ, ¬±0.08%
    'M30': { accumulationPhase: 0.17, fixedRangePercent: 0.10 }   // 5 –º–∏–Ω –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–µ, ¬±0.10%
}
```

#### 2. –î–≤–µ —Ñ–∞–∑—ã –∂–∏–∑–Ω–∏ —Å–≤–µ—á–∏

**–§–∞–∑–∞ 1: –ù–∞–∫–æ–ø–ª–µ–Ω–∏–µ (–ø–µ—Ä–≤—ã–µ 15-20% –≤—Ä–µ–º–µ–Ω–∏)**
- High/low —Ä–∞—Å—Ç—É—Ç –∫–∞–∫ –æ–±—ã—á–Ω–æ (max/min)
- –§–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –Ω–∞—á–∞–ª—å–Ω—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç–∏

**–§–∞–∑–∞ 2: –°–∫–æ–ª—å–∑—è—â–µ–µ –æ–∫–Ω–æ (–æ—Å—Ç–∞–ª—å–Ω—ã–µ 80-85% –≤—Ä–µ–º–µ–Ω–∏)**
- –î–∏–∞–ø–∞–∑–æ–Ω —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è
- High = Close + fixedRange/2
- Low = Close - fixedRange/2
- High –∏ Low "–µ–¥—É—Ç" –≤–º–µ—Å—Ç–µ —Å —Ü–µ–Ω–æ–π

**–§–∏–Ω–∞–ª—å–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 10% –≤—Ä–µ–º–µ–Ω–∏)**
- –î–∏–∞–ø–∞–∑–æ–Ω –º–æ–∂–µ—Ç –Ω–µ–º–Ω–æ–≥–æ –∏–∑–º–µ–Ω–∏—Ç—å—Å—è (¬±20%) –¥–ª—è —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ—Å—Ç–∏

#### 3. –ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã
- `getCandlePhase()` - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π —Ñ–∞–∑—ã —Å–≤–µ—á–∏
- `getBasePrice()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –±–∞–∑–æ–≤–æ–π —Ü–µ–Ω—ã –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –¥–∏–∞–ø–∞–∑–æ–Ω–∞
- –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π `updateCandleWithTick()` —Å –ª–æ–≥–∏–∫–æ–π —Å–∫–æ–ª—å–∑—è—â–µ–≥–æ –æ–∫–Ω–∞

#### 4. –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- `candlePhaseData` Map - —Ö—Ä–∞–Ω–∏—Ç fixedRange –¥–ª—è –∫–∞–∂–¥–æ–π –∞–∫—Ç–∏–≤–Ω–æ–π —Å–≤–µ—á–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö (—Ö—Ä–∞–Ω–∏—Ç —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 —Å–≤–µ—á–µ–π)

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç

### –î–ª—è S5, S10, S15, S30:
- –ü–æ–≤–µ–¥–µ–Ω–∏–µ –ù–ï –∏–∑–º–µ–Ω–µ–Ω–æ (accumulationPhase: 1.0)
- –†–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ –≤ –Ω–∞–∫–æ–ø–∏—Ç–µ–ª—å–Ω–æ–º —Ä–µ–∂–∏–º–µ

### –î–ª—è M1, M2, M3, M5, M10, M15, M30:
- ‚úÖ –°–≤–µ—á–∏ –æ–¥–∏–Ω–∞–∫–æ–≤–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ (~3-5—Å–º –Ω–∞ —ç–∫—Ä–∞–Ω–µ)
- ‚úÖ –î–∏–∞–ø–∞–∑–æ–Ω "—Å–∫–æ–ª—å–∑–∏—Ç" –≤–º–µ—Å—Ç–µ —Å —Ü–µ–Ω–æ–π
- ‚úÖ –¶–µ–Ω–∞ –∫–æ–ª–µ–±–ª–µ—Ç—Å—è –≤ —É–∑–∫–æ–º –∫–æ—Ä–∏–¥–æ—Ä–µ
- ‚úÖ –ß–∏—Ç–∞–µ–º—ã–π –≥—Ä–∞—Ñ–∏–∫ –∫–∞–∫ –Ω–∞ PocketOption

## üîÑ –ö–∞–∫ –æ—Ç–∫–∞—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ —Å–ª–æ–º–∞–ª–æ—Å—å:

```bash
cd /workspace

# –û—Ç–∫–∞—Ç frontend
cp frontend/chart_work4.js frontend/chart.js
cp frontend/app_work4.js frontend/app.js
cp frontend/chartTimeframe_work4.js frontend/chartTimeframe.js

# –û—Ç–∫–∞—Ç backend
cp backend/server_work4.js backend/server.js
cp backend/chartGenerator_work4.js backend/chartGenerator.js

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
npm restart
```

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–æ–±–∞–≤–ª–µ–Ω—ã debug/info –ª–æ–≥–∏:
- `üìà Accumulation phase` - —Ñ–∞–∑–∞ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è
- `üéØ Sliding window activated` - –∞–∫—Ç–∏–≤–∞—Ü–∏—è —Å–∫–æ–ª—å–∑—è—â–µ–≥–æ –æ–∫–Ω–∞
- `üéØ Sliding window active` - —Ä–∞–±–æ—Ç–∞ —Å–∫–æ–ª—å–∑—è—â–µ–≥–æ –æ–∫–Ω–∞
- `üìè Final adjustment phase` - —Ñ–∏–Ω–∞–ª—å–Ω—ã–µ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏

## ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:
1. –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Ç–∞–π–º—Ñ—Ä–µ–π–º–∞–º–∏ (S5, M1, M5, M10, M30)
2. –†–∞–∑–º–µ—Ä —Å–≤–µ—á–µ–π –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º –¥–ª—è M1+ —Ç–∞–π–º—Ñ—Ä–µ–π–º–æ–≤
3. –¶–µ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –∫–æ–ª–µ–±–∞—Ç—å—Å—è –≤ —É–∑–∫–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ
4. S5 –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ —Ä–∞–Ω—å—à–µ
5. –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–æ–≤ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–æ—Ä–º–∞–ª—å–Ω–æ

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É!

–•–µ—Ä–∞–∫ —Ö–µ—Ä–∞–∫ –∏ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω! üéØ
